<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Allow API endpoints to pass through to PHP
  RewriteRule ^api/ - [L]

  # Allow direct access to static assets
  RewriteRule ^(.*)\.(js|css|png|jpg|jpeg|gif|svg|ico|txt|woff2?|ttf|map|json|webmanifest)$ - [L]

  # If the requested resource doesn't exist, serve index.html (SPA fallback)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

RewriteEngine On

# Bypass SPA rewrite for API folder so PHP runs
RewriteRule ^api/ - [L]

# Allow real files to be served directly
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Allow real directories to be accessed directly
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# SPA: send everything else to index.html
RewriteRule ^ index.html [L]

# Security and caching (optional basic)
Options -Indexes
ServerSignature Off

