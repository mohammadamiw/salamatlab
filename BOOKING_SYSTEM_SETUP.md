# راهنمای نصب و پیکربندی سیستم رزرو

## مراحل نصب

### 1. آپلود فایل‌ها
فایل‌های زیر را در هاست خود آپلود کنید:
- `public/api/booking.php` - API endpoint برای دریافت درخواست‌ها
- `public/api/.htaccess` - تنظیمات مسیریابی
- `src/components/BookingForm.tsx` - کامپوننت فرم رزرو

### 2. پیکربندی ایمیل
در فایل `public/api/booking.php`، ایمیل‌های زیر تنظیم شده‌اند:
```php
// ایمیل فرستنده (از دامنه شما)
'From: info@salamatlab.com'
'Reply-To: info@salamatlab.com'

// ایمیل گیرنده (مدیر)
$admin_email = 'salamatlab33010@gmail.com';
```

**نکته مهم:** ایمیل فرستنده باید از دامنه `salamat-lab.ir` باشد تا SPF/DMARC رد نشود.

### 3. بررسی تنظیمات هاست
اطمینان حاصل کنید که:
- PHP در هاست شما فعال است
- تابع `mail()` در PHP فعال است
- فایل `.htaccess` پشتیبانی می‌شود

### 4. تست سیستم
پس از نصب، فرم‌های رزرو در صفحات زیر فعال خواهند شد:
- صفحه چکاپ‌ها: هر پنل چکاپ دارای دکمه "رزرو چکاپ" است
- صفحه پزشکان: هر کارت پزشک دارای دکمه "رزرو ویزیت" است

## ویژگی‌های سیستم

### فرم رزرو شامل:
- نام و نام خانوادگی (اجباری)
- شماره تماس (اجباری)
- ایمیل (اختیاری)
- کد ملی (اجباری)
- تاریخ تولد (اجباری)
- جنسیت (اجباری)
- شهر (اجباری)
- بیمه پایه (اجباری)
- نوع بیمه پایه (در صورت داشتن بیمه پایه)
- بیمه تکمیلی (اختیاری)
- توضیحات اضافی (اختیاری)

### عملکرد سیستم:
1. کاربر فرم را پر می‌کند
2. اطلاعات به سرور ارسال می‌شود
3. ایمیل به مدیر ارسال می‌شود
4. در صورت ارائه ایمیل، تاییدیه به کاربر ارسال می‌شود
5. تمام درخواست‌ها در فایل `bookings.log` ثبت می‌شود

## عیب‌یابی

### مشکل: ایمیل ارسال نمی‌شود
- بررسی کنید که تابع `mail()` در PHP فعال باشد
- ایمیل مدیر را درست تنظیم کرده باشید
- بررسی کنید که هاست شما محدودیت ارسال ایمیل نداشته باشد

### مشکل: فرم ارسال نمی‌شود
- بررسی کنید که فایل `.htaccess` درست آپلود شده باشد
- مسیر `/api/booking` باید به `booking.php` هدایت شود
- بررسی کنید که CORS درست تنظیم شده باشد

### مشکل: خطای 500
- بررسی کنید که PHP در هاست فعال باشد
- فایل `bookings.log` باید قابل نوشتن باشد
- بررسی کنید که تمام فیلدهای اجباری در فرم پر شوند

## امنیت

### نکات امنیتی:
- تمام ورودی‌ها با `htmlspecialchars()` پاکسازی می‌شوند
- فقط درخواست‌های POST پذیرفته می‌شوند
- فیلدهای اجباری اعتبارسنجی می‌شوند
- فایل log در پوشه عمومی قرار دارد (در صورت نیاز به امنیت بیشتر، آن را خارج از public قرار دهید)

## سفارشی‌سازی

### تغییر متن‌ها:
تمام متن‌های فارسی در فایل `booking.php` قابل ویرایش هستند.

### تغییر فیلدها:
برای اضافه یا حذف فیلدها، هم فایل `BookingForm.tsx` و هم `booking.php` باید ویرایش شوند.

### تغییر ایمیل:
قالب ایمیل‌ها در فایل `booking.php` قابل ویرایش است.

## پشتیبانی

در صورت بروز مشکل، فایل `bookings.log` را بررسی کنید تا جزئیات درخواست‌ها را ببینید.
